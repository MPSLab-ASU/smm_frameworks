#! /usr/bin/env python
import os
import subprocess

cwd = os.getcwd()
directories = []
for path in os.listdir(cwd):
	if os.path.isdir(path):
		directories.append(path)
#directories = [ 'CRC32']
directories.remove('CRC32')
print directories

for directory in directories:
	os.chdir(directory)
	print directory
	command = ""
#	command = command + " make clean; smmmake --clean; ./configure-smm-min; make; make overlay; make linkerscript; make cm; make ecm; ./runme;  mkdir m5out/min; mv m5out/smm* m5out/min;"
#	command = command + " make clean; smmmake --clean; ./configure-smm-mid; make; make overlay; make linkerscript; make cm; make ecm; ./runme;  mkdir m5out/mid; mv m5out/smm* m5out/mid;"
#	command = command + " make clean; smmmake --clean; ./configure-smm-max; make; make overlay; make linkerscript; make cm; make ecm; ./runme;  mkdir m5out/max; mv m5out/smm* m5out/max;"
	command = command + " make clean; smmmake --clean; ./configure-smm;  make; make overlay; make linkerscript; make cm; make ecm; ./runme;"
	subprocess.call(command, shell=True)
	os.chdir(cwd)
    	
